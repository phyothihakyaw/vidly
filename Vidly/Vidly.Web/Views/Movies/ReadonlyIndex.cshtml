@model IEnumerable<Movie>
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Movies</h1>

<table id="movies" class="table table-hover">
    <thead class="thead-light">
        <tr>
            <th scope="col">
                @Html.DisplayNameFor(model => model.Name)
            </th>
            <th scope="col">
                @Html.DisplayNameFor(model => model.Genre.Name)
            </th>
            <th scope="col">
            </th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>

@section Scripts {
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip();

            var table = $('#movies').DataTable({
                ajax: {
                    url: '/api/movies',
                    dataSrc: ''
                },
                columns: [
                    {
                        data: 'name'
                    },
                    {
                        data: 'genre.name'
                    },
                    {
                        render: function (data, type, movie) {
                            return "<a  class='btn btn-link' href='/movies/details/" + movie.id + "'><i class='fas fa-info-circle' data-toggle='tooltip' data-placement='top' title='Movie details'></i></a>"
                        }
                    }
                ]
            });
        })
    </script>
}